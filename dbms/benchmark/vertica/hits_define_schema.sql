create table hits_10m_meshed
(
    WatchID INTEGER,
    JavaEnable INTEGER,
    Title VARCHAR(128),
    GoodEvent INTEGER,
    EventTime DATETIME,
    EventDate DATE,
    CounterID INTEGER,
    ClientIP INTEGER,
    RegionID INTEGER,
    UserID INTEGER,
    CounterClass INTEGER,
    OS INTEGER,
    UserAgent INTEGER,
    URL VARCHAR(128),
    Referer VARCHAR(128),
    Refresh INTEGER,
    RefererCategoryID INTEGER,
    RefererRegionID INTEGER,
    URLCategoryID INTEGER,
    URLRegionID INTEGER,
    ResolutionWidth INTEGER,
    ResolutionHeight INTEGER,
    ResolutionDepth INTEGER,
    FlashMajor INTEGER,
    FlashMinor INTEGER,
    FlashMinor2 VARCHAR(128),
    NetMajor INTEGER,
    NetMinor INTEGER,
    UserAgentMajor INTEGER,
    UserAgentMinor CHAR(2),
    CookieEnable INTEGER,
    JavascriptEnable INTEGER,
    IsMobile INTEGER,
    MobilePhone INTEGER,
    MobilePhoneModel VARCHAR(128),
    Params VARCHAR(128),
    IPNetworkID INTEGER,
    TraficSourceID INTEGER,
    SearchEngineID INTEGER,
    SearchPhrase VARCHAR(128),
    AdvEngineID INTEGER,
    IsArtifical INTEGER,
    WindowClientWidth INTEGER,
    WindowClientHeight INTEGER,
    ClientTimeZone INTEGER,
    ClientEventTime DATETIME,
    SilverlightVersion1 INTEGER,
    SilverlightVersion2 INTEGER,
    SilverlightVersion3 INTEGER,
    SilverlightVersion4 INTEGER,
    PageCharset VARCHAR(128),
    CodeVersion INTEGER,
    IsLink INTEGER,
    IsDownload INTEGER,
    IsNotBounce INTEGER,
    FUniqID INTEGER,
    OriginalURL VARCHAR(128),
    HID INTEGER,
    IsOldCounter INTEGER,
    IsEvent INTEGER,
    IsParameter INTEGER,
    DontCountHits INTEGER,
    WithHash INTEGER,
    HitColor CHAR(1),
    LocalEventTime DATETIME,
    Age INTEGER,
    Sex INTEGER,
    Income INTEGER,
    Interests INTEGER,
    Robotness INTEGER,
    RemoteIP INTEGER,
    WindowName INTEGER,
    OpenerName INTEGER,
    HistoryLength INTEGER,
    BrowserLanguage CHAR(2),
    BrowserCountry CHAR(2),
    SocialNetwork VARCHAR(128),
    SocialAction VARCHAR(128),
    HTTPError INTEGER,
    SendTiming INTEGER,
    DNSTiming INTEGER,
    ConnectTiming INTEGER,
    ResponseStartTiming INTEGER,
    ResponseEndTiming INTEGER,
    FetchTiming INTEGER,
    SocialSourceNetworkID INTEGER,
    SocialSourcePage VARCHAR(128),
    ParamPrice INTEGER,
    ParamOrderID VARCHAR(128),
    ParamCurrency CHAR(3),
    ParamCurrencyID INTEGER,
    OpenstatServiceName VARCHAR(128),
    OpenstatCampaignID VARCHAR(128),
    OpenstatAdID VARCHAR(128),
    OpenstatSourceID VARCHAR(128),
    UTMSource VARCHAR(128),
    UTMMedium VARCHAR(128),
    UTMCampaign VARCHAR(128),
    UTMContent VARCHAR(128),
    UTMTerm VARCHAR(128),
    FromTag VARCHAR(128),
    HasGCLID INTEGER,
    RefererHash INTEGER,
    URLHash INTEGER,
    CLID INTEGER, 
    UserIDHash INTEGER
);

create projection if not exists hits_10m_meshed_p  AS SELECT * FROM hits_10m_meshed  ORDER BY CounterID, EventDate, UserIDHash, EventTime;

\set input_file '''/opt/dump/dump_0.3/dump_hits_10m_meshed.tsv''' 
COPY hits_10m_meshed FROM :input_file DELIMITER E'\t' DIRECT;


create table hits_100m_meshed
(
    WatchID INTEGER,
    JavaEnable INTEGER,
    Title VARCHAR(128),
    GoodEvent INTEGER,
    EventTime DATETIME,
    EventDate DATE,
    CounterID INTEGER,
    ClientIP INTEGER,
    RegionID INTEGER,
    UserID INTEGER,
    CounterClass INTEGER,
    OS INTEGER,
    UserAgent INTEGER,
    URL VARCHAR(128),
    Referer VARCHAR(128),
    Refresh INTEGER,
    RefererCategoryID INTEGER,
    RefererRegionID INTEGER,
    URLCategoryID INTEGER,
    URLRegionID INTEGER,
    ResolutionWidth INTEGER,
    ResolutionHeight INTEGER,
    ResolutionDepth INTEGER,
    FlashMajor INTEGER,
    FlashMinor INTEGER,
    FlashMinor2 VARCHAR(128),
    NetMajor INTEGER,
    NetMinor INTEGER,
    UserAgentMajor INTEGER,
    UserAgentMinor CHAR(2),
    CookieEnable INTEGER,
    JavascriptEnable INTEGER,
    IsMobile INTEGER,
    MobilePhone INTEGER,
    MobilePhoneModel VARCHAR(128),
    Params VARCHAR(128),
    IPNetworkID INTEGER,
    TraficSourceID INTEGER,
    SearchEngineID INTEGER,
    SearchPhrase VARCHAR(128),
    AdvEngineID INTEGER,
    IsArtifical INTEGER,
    WindowClientWidth INTEGER,
    WindowClientHeight INTEGER,
    ClientTimeZone INTEGER,
    ClientEventTime DATETIME,
    SilverlightVersion1 INTEGER,
    SilverlightVersion2 INTEGER,
    SilverlightVersion3 INTEGER,
    SilverlightVersion4 INTEGER,
    PageCharset VARCHAR(128),
    CodeVersion INTEGER,
    IsLink INTEGER,
    IsDownload INTEGER,
    IsNotBounce INTEGER,
    FUniqID INTEGER,
    OriginalURL VARCHAR(128),
    HID INTEGER,
    IsOldCounter INTEGER,
    IsEvent INTEGER,
    IsParameter INTEGER,
    DontCountHits INTEGER,
    WithHash INTEGER,
    HitColor CHAR(1),
    LocalEventTime DATETIME,
    Age INTEGER,
    Sex INTEGER,
    Income INTEGER,
    Interests INTEGER,
    Robotness INTEGER,
    RemoteIP INTEGER,
    WindowName INTEGER,
    OpenerName INTEGER,
    HistoryLength INTEGER,
    BrowserLanguage CHAR(2),
    BrowserCountry CHAR(2),
    SocialNetwork VARCHAR(128),
    SocialAction VARCHAR(128),
    HTTPError INTEGER,
    SendTiming INTEGER,
    DNSTiming INTEGER,
    ConnectTiming INTEGER,
    ResponseStartTiming INTEGER,
    ResponseEndTiming INTEGER,
    FetchTiming INTEGER,
    SocialSourceNetworkID INTEGER,
    SocialSourcePage VARCHAR(128),
    ParamPrice INTEGER,
    ParamOrderID VARCHAR(128),
    ParamCurrency CHAR(3),
    ParamCurrencyID INTEGER,
    OpenstatServiceName VARCHAR(128),
    OpenstatCampaignID VARCHAR(128),
    OpenstatAdID VARCHAR(128),
    OpenstatSourceID VARCHAR(128),
    UTMSource VARCHAR(128),
    UTMMedium VARCHAR(128),
    UTMCampaign VARCHAR(128),
    UTMContent VARCHAR(128),
    UTMTerm VARCHAR(128),
    FromTag VARCHAR(128),
    HasGCLID INTEGER,
    RefererHash INTEGER,
    URLHash INTEGER,
    CLID INTEGER, 
    UserIDHash INTEGER
);

create projection if not exists hits_100m_meshed_p  AS SELECT * FROM hits_100m_meshed  ORDER BY CounterID, EventDate, UserIDHash, EventTime;

\set input_file '''/opt/dump/dump_0.3/dump_hits_100m_meshed.tsv''' 
COPY hits_10m_meshed FROM :input_file DELIMITER E'\t' DIRECT;

create table hits_1b_meshed
(
    WatchID INTEGER,
    JavaEnable INTEGER,
    Title VARCHAR(128),
    GoodEvent INTEGER,
    EventTime DATETIME,
    EventDate DATE,
    CounterID INTEGER,
    ClientIP INTEGER,
    RegionID INTEGER,
    UserID INTEGER,
    CounterClass INTEGER,
    OS INTEGER,
    UserAgent INTEGER,
    URL VARCHAR(128),
    Referer VARCHAR(128),
    Refresh INTEGER,
    RefererCategoryID INTEGER,
    RefererRegionID INTEGER,
    URLCategoryID INTEGER,
    URLRegionID INTEGER,
    ResolutionWidth INTEGER,
    ResolutionHeight INTEGER,
    ResolutionDepth INTEGER,
    FlashMajor INTEGER,
    FlashMinor INTEGER,
    FlashMinor2 VARCHAR(128),
    NetMajor INTEGER,
    NetMinor INTEGER,
    UserAgentMajor INTEGER,
    UserAgentMinor CHAR(2),
    CookieEnable INTEGER,
    JavascriptEnable INTEGER,
    IsMobile INTEGER,
    MobilePhone INTEGER,
    MobilePhoneModel VARCHAR(128),
    Params VARCHAR(128),
    IPNetworkID INTEGER,
    TraficSourceID INTEGER,
    SearchEngineID INTEGER,
    SearchPhrase VARCHAR(128),
    AdvEngineID INTEGER,
    IsArtifical INTEGER,
    WindowClientWidth INTEGER,
    WindowClientHeight INTEGER,
    ClientTimeZone INTEGER,
    ClientEventTime DATETIME,
    SilverlightVersion1 INTEGER,
    SilverlightVersion2 INTEGER,
    SilverlightVersion3 INTEGER,
    SilverlightVersion4 INTEGER,
    PageCharset VARCHAR(128),
    CodeVersion INTEGER,
    IsLink INTEGER,
    IsDownload INTEGER,
    IsNotBounce INTEGER,
    FUniqID INTEGER,
    OriginalURL VARCHAR(128),
    HID INTEGER,
    IsOldCounter INTEGER,
    IsEvent INTEGER,
    IsParameter INTEGER,
    DontCountHits INTEGER,
    WithHash INTEGER,
    HitColor CHAR(1),
    LocalEventTime DATETIME,
    Age INTEGER,
    Sex INTEGER,
    Income INTEGER,
    Interests INTEGER,
    Robotness INTEGER,
    RemoteIP INTEGER,
    WindowName INTEGER,
    OpenerName INTEGER,
    HistoryLength INTEGER,
    BrowserLanguage CHAR(2),
    BrowserCountry CHAR(2),
    SocialNetwork VARCHAR(128),
    SocialAction VARCHAR(128),
    HTTPError INTEGER,
    SendTiming INTEGER,
    DNSTiming INTEGER,
    ConnectTiming INTEGER,
    ResponseStartTiming INTEGER,
    ResponseEndTiming INTEGER,
    FetchTiming INTEGER,
    SocialSourceNetworkID INTEGER,
    SocialSourcePage VARCHAR(128),
    ParamPrice INTEGER,
    ParamOrderID VARCHAR(128),
    ParamCurrency CHAR(3),
    ParamCurrencyID INTEGER,
    OpenstatServiceName VARCHAR(128),
    OpenstatCampaignID VARCHAR(128),
    OpenstatAdID VARCHAR(128),
    OpenstatSourceID VARCHAR(128),
    UTMSource VARCHAR(128),
    UTMMedium VARCHAR(128),
    UTMCampaign VARCHAR(128),
    UTMContent VARCHAR(128),
    UTMTerm VARCHAR(128),
    FromTag VARCHAR(128),
    HasGCLID INTEGER,
    RefererHash INTEGER,
    URLHash INTEGER,
    CLID INTEGER, 
    UserIDHash INTEGER
);

create projection if not exists hits_1b_meshed_p  AS SELECT * FROM hits_1b_meshed  ORDER BY CounterID, EventDate, UserIDHash, EventTime;

\set input_file '''/opt/dump/dump_0.3/dump_hits_1b_meshed.tsv''' 
COPY hits_1b_meshed FROM :input_file DELIMITER E'\t' DIRECT;

